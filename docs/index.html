<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>How to generate eBay user tokens</title>
</head>
<body>
    To generate user tokens:

    Get an authorization code - this is used only to generate a token. It is good for five minutes. The url for the sign in page is on eBay develop site:
    href='https://developer.ebay.com/my/auth?env=sandbox&index=0&auth_type=oauth'>

Click on Get a token from eBay via your application. Find the link for your branded sign in page 0Auth.

Your authorization code will be embedded in the url of the page you are redirected to after you confirm.

    Create a new user token and refresh token. The user token is good for two hours. The refresh token is good for 18 month. You need the authorization code from above for this call.

    Use the refresh token to generate a new user token as needed.

The user only needs to log into eBay to generate the authorization code. This code is used for step 2. Only the refresh token is needed for step 3.

I will manually obtain the authorization code and refresh token. I will store the refresh token in the database to use for generating new user tokens. The code is very similar to generating new application tokens.

See: https://developer.ebay.com/api-docs/static/oauth-authorization-code-grant.html

To perform step 2 above use curl:
curl -X POST 'https://api.ebay.com/identity/v1/oauth2/token '
-H 'Content-Type: application/x-www-form-urlencoded'
-H 'Authorization: Basic AUTHORIZATION-From AMAConstants.php'
-d 'grant_type=authorization_code&
code=YOURAUTHORIZATIONCODE&
redirect_uri=RJ_Eichhorn-RJEichho-RickAp-cdcxflhw'

To generate a token from a refresh token:
curl -X POST 'https://api.ebay.com/identity/v1/oauth2/token '
-H 'Content-Type: application/x-www-form-urlencoded'
-H 'Authorization: Basic AUTHORIZATIONCODE'
-d 'grant_type=refresh_token&refresh_token=v^1.1#...=='

NOTE: the tokens returned by eBay are not url encoded. To use them in a curl call, you need to use:
--data-urlencode instead of -d:
curl -X POST 'https://api.ebay.com/identity/v1/oauth2/token '
-H 'Content-Type: application/x-www-form-urlencoded'
-H 'Authorization: Basic ....GE4ZDpQUkQtYzhlOGEwMGMwMTQ1LTc1Y2YtNDJmNC04NzI5LTFlZWQK'
--data-urlencode 'grant_type=refresh_token'
--data-urlencode 'refresh_token=v^1.1#i^1#r^1#f^0...^UlNFXjI2MA=='
</body>
</html>